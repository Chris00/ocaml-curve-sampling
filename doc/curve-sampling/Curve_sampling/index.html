<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Curve_sampling (curve-sampling.Curve_sampling)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc %%VERSION%%"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../index.html">curve-sampling</a> &#x00BB; Curve_sampling</nav><h1>Module <code>Curve_sampling</code></h1><p>Adaptive sampling of 2D curves.</p><dl><dt>version</dt><dd>0.2</dd></dl><nav class="toc"><ul><li><a href="#parametric-curves">Parametric curves</a></li><li><a href="#uniform-sampling">Uniform sampling</a></li><li><a href="#relation-to-sequences">Relation to sequences</a></li><li><a href="#transforming-samplings">Transforming samplings</a></li><li><a href="#gg-interface">GG interface</a></li><li><a href="#save-the-sampling-data">Save the sampling data</a></li></ul></nav></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> <span>_ t</span></code></dt><dd><p>Representation of a 2D sampling. This can be thought as a path, with possible &quot;jumps&quot; because of discontinuities or leaving the &quot;domain&quot;. The parameter says whether the sampling comes from evaluating a function, so it makes sense to refine it, or is just a sequence of points.</p></dd></dl><section><header><h3 id="parametric-curves"><a href="#parametric-curves" class="anchor"></a>Parametric curves</h3></header><dl><dt class="spec value" id="val-fn"><a href="#val-fn" class="anchor"></a><code><span class="keyword">val</span> fn : <span>?&#8288;n:int</span> <span>&#45;&gt;</span> <span>?&#8288;viewport:Gg.Box2.t</span> <span>&#45;&gt;</span> <span>?&#8288;init:<span>float list</span></span> <span>&#45;&gt;</span> <span>?&#8288;init_pt:<span><span>(float * float)</span> list</span></span> <span>&#45;&gt;</span> <span>(float <span>&#45;&gt;</span> float)</span> <span>&#45;&gt;</span> float <span>&#45;&gt;</span> float <span>&#45;&gt;</span> <span><span>[ `Fn ]</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>fn f a b</code> returns a sampling of the graph of <code>f</code> on the interval [<code>a</code>, <code>b</code>] by evaluating <code>f</code> at <code>n</code> points. For the optional arguments, see <a href="index.html#val-param"><code>param</code></a>.</p></dd></dl><dl><dt class="spec value" id="val-param"><a href="#val-param" class="anchor"></a><code><span class="keyword">val</span> param : <span>?&#8288;n:int</span> <span>&#45;&gt;</span> <span>?&#8288;viewport:Gg.Box2.t</span> <span>&#45;&gt;</span> <span>?&#8288;init:<span>float list</span></span> <span>&#45;&gt;</span> <span>?&#8288;init_pt:<span><span>(float * <span>(float * float)</span>)</span> list</span></span> <span>&#45;&gt;</span> <span>(float <span>&#45;&gt;</span> float * float)</span> <span>&#45;&gt;</span> float <span>&#45;&gt;</span> float <span>&#45;&gt;</span> <span><span>[ `Fn ]</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>param f a b</code> returns a sampling of the range of <code>f</code> on the interval [<code>a</code>, <code>b</code>] by evaluating <code>f</code> at <code>n</code> points (or less).</p><dl><dt>parameter n</dt><dd><p>The maximum number of evaluations of <code>f</code>. Default: <code>100</code>. If <code>n</code> ≤ 10, then <code>n = 10</code> is used instead.</p></dd></dl><dl><dt>parameter init</dt><dd><p>Initial values of <code>t</code> such that <code>f t</code> must be included into the sampling in addition to the <code>n</code> evaluations. Only the values between <code>a</code> and <code>b</code> are taken into account. Default: empty.</p></dd></dl><dl><dt>parameter init_pt</dt><dd><p>Initial points <code>(t, f t)</code> to include into the sampling in addition to the <code>n</code> evaluations. This allows you to use previous evaluations of <code>f</code>. Only the couples with first coordinate <code>t</code> between <code>a</code> and <code>b</code> are considered. Default: empty.</p></dd></dl></dd></dl></section><section><header><h3 id="uniform-sampling"><a href="#uniform-sampling" class="anchor"></a>Uniform sampling</h3></header><dl><dt class="spec value" id="val-uniform"><a href="#val-uniform" class="anchor"></a><code><span class="keyword">val</span> uniform : <span>?&#8288;n:int</span> <span>&#45;&gt;</span> <span>(float <span>&#45;&gt;</span> float)</span> <span>&#45;&gt;</span> float <span>&#45;&gt;</span> float <span>&#45;&gt;</span> <span><span>[ `Fn ]</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>uniform f a b</code> returns a sampling of the graph of <code>f</code> on <code>n</code> equidistant points in the interval [<code>a</code>, <code>b</code>] (the boundaries <code>a</code> and <code>b</code> being always included — so <code>n &gt;= 2</code>). The resulting sampling may have less than <code>n</code> points because evaluations returning points with NaN components are discarded (they split the path).</p><dl><dt>parameter n</dt><dd><p>the number of points. If <code>n &lt;= 2</code> is given, it is considered as if <code>n=2</code> was passed. Default: <code>n = 100</code>.</p></dd></dl></dd></dl></section><section><header><h3 id="relation-to-sequences"><a href="#relation-to-sequences" class="anchor"></a>Relation to sequences</h3></header><dl><dt class="spec value" id="val-of_path"><a href="#val-of_path" class="anchor"></a><code><span class="keyword">val</span> of_path : <span><span>(float * float)</span> list</span> <span>&#45;&gt;</span> <span><span>[ `Pt ]</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p>Use the provided path as the sampling.</p></dd></dl><dl><dt class="spec value" id="val-to_list"><a href="#val-to_list" class="anchor"></a><code><span class="keyword">val</span> to_list : <span><span class="type-var">_</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span><span>(float * float)</span> list</span> list</span></code></dt><dd><p><code>to_list t</code> return the sampling as a list of connected components of the path, each of which is given as a list of (x,y) couples.</p></dd></dl><dl><dt class="spec value" id="val-of_seq"><a href="#val-of_seq" class="anchor"></a><code><span class="keyword">val</span> of_seq : <span>?&#8288;n:int</span> <span>&#45;&gt;</span> <span><span>(float * float)</span> Stdlib.Seq.t</span> <span>&#45;&gt;</span> <span><span>[ `Pt ]</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>of_seq seq</code> convert the sequence of points <code>seq</code> to a sampling.</p><dl><dt>parameter n</dt><dd><p>only takes at most the first <code>n</code> entries. If <code>n</code> is not set (the default), this function may run into an infinite loop.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-to_seq"><a href="#val-to_seq" class="anchor"></a><code><span class="keyword">val</span> to_seq : <span><span class="type-var">_</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span><span>(float * float)</span> Stdlib.Seq.t</span> Stdlib.Seq.t</span></code></dt><dd><p><code>to_seq t</code> convert <code>t</code> to a sequence of connected compononent.</p></dd></dl></section><section><header><h3 id="transforming-samplings"><a href="#transforming-samplings" class="anchor"></a>Transforming samplings</h3></header><dl><dt class="spec value" id="val-tr"><a href="#val-tr" class="anchor"></a><code><span class="keyword">val</span> tr : Gg.m3 <span>&#45;&gt;</span> <span><span class="type-var">_</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span>[ `Pt ]</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>tr m t</code> apply the transform <code>m</code> on <code>t</code>. See <span class="xref-unresolved" title="unresolved reference to &quot;Gg.P2.tr&quot;"><span class="xref-unresolved" title="unresolved reference to &quot;Gg.P2&quot;"><code>Gg</code>.P2</span>.tr</span> for more details.</p></dd></dl><dl><dt class="spec value" id="val-clip"><a href="#val-clip" class="anchor"></a><code><span class="keyword">val</span> clip : <span><span class="type-var">_</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> Gg.box2 <span>&#45;&gt;</span> <span><span>[ `Pt ]</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>clip t b</code> returns the sampling <code>t</code> but clipped to the 2D box. A path that crosses the boundary will get additional nodes at the points of crossing and the part outside the bounding box will be dropped. (Thus a path entirely out of the bounding box will be removed.)</p></dd></dl></section><section><header><h3 id="gg-interface"><a href="#gg-interface" class="anchor"></a>GG interface</h3></header><dl><dt class="spec module" id="module-P2"><a href="#module-P2" class="anchor"></a><code><span class="keyword">module</span> <a href="P2/index.html">P2</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Interface using <code>Gg.p2</code> to represent points.</p></dd></dl></section><section><header><h3 id="save-the-sampling-data"><a href="#save-the-sampling-data" class="anchor"></a>Save the sampling data</h3></header><dl><dt class="spec value" id="val-to_channel"><a href="#val-to_channel" class="anchor"></a><code><span class="keyword">val</span> to_channel : <span><span class="type-var">_</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> Stdlib.out_channel <span>&#45;&gt;</span> unit</code></dt><dd><p><code>to_channel t ch</code> writes the sampling <code>t</code> to the channel <code>ch</code>. Each point is written as &quot;x y&quot; on a single line (in scientific notation). If the path is interrupted, a blank line is printed. This format is compatible with gnuplot.</p></dd></dl><dl><dt class="spec value" id="val-to_file"><a href="#val-to_file" class="anchor"></a><code><span class="keyword">val</span> to_file : <span><span class="type-var">_</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> unit</code></dt><dd><p><code>to_file t fname</code> saves the sampling <code>t</code> to the file <code>fname</code> using the format described in <a href="index.html#val-to_channel"><code>to_channel</code></a>.</p></dd></dl><dl><dt class="spec value" id="val-to_latex"><a href="#val-to_latex" class="anchor"></a><code><span class="keyword">val</span> to_latex : <span><span class="type-var">_</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span>?&#8288;n:int</span> <span>&#45;&gt;</span> <span>?&#8288;arrow:string</span> <span>&#45;&gt;</span> <span>?&#8288;arrow_pos:float</span> <span>&#45;&gt;</span> <span>?&#8288;color:Gg.color</span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> unit</code></dt><dd><p><code>to_latex t fname</code> saves the sampling <code>t</code> as PGF/TikZ commands.</p><dl><dt>parameter n</dt><dd><p>the maximum number of points of PGF path (after which the sampling curve is drawn as several PGF paths). Default: <code>20_000</code>.</p></dd></dl><dl><dt>parameter arrow</dt><dd><p>The type of arrow to draw. See the TikZ manual. If <code>arrow_pos</code> is specified and not this, it defaults to &quot;&gt;&quot;.</p></dd></dl><dl><dt>parameter arrow_pos</dt><dd><p>the position of the arrow as a percent of the curve length (in the interval [0.,1.]). If <code>arrow</code> is specified but not this, it defaults to <code>0.5</code>.</p></dd></dl><dl><dt>parameter color</dt><dd><p>specify the color of the curve.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-to_latex_channel"><a href="#val-to_latex_channel" class="anchor"></a><code><span class="keyword">val</span> to_latex_channel : <span><span class="type-var">_</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span>?&#8288;n:int</span> <span>&#45;&gt;</span> <span>?&#8288;arrow:string</span> <span>&#45;&gt;</span> <span>?&#8288;arrow_pos:float</span> <span>&#45;&gt;</span> <span>?&#8288;color:Gg.color</span> <span>&#45;&gt;</span> Stdlib.out_channel <span>&#45;&gt;</span> unit</code></dt><dd><p><code>to_latex_channel t ch</code> writes the sampling <code>t</code> as PGF/TikZ commands to the channel <code>ch</code>. See <a href="index.html#val-to_latex"><code>to_latex</code></a> for the meaning of optional arguments.</p></dd></dl></section></div></body></html>