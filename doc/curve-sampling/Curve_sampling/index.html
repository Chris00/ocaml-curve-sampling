<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Curve_sampling (curve-sampling.Curve_sampling)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.0.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> – <a href="../index.html">curve-sampling</a> &#x00BB; Curve_sampling</nav><header class="odoc-preamble"><h1>Module <code><span>Curve_sampling</span></code></h1><p>Adaptive sampling of 2D curves.</p><ul class="at-tags"><li class="version"><span class="at-tag">version</span> 0.2.1</li></ul></header><nav class="odoc-toc"><ul><li><a href="#parametric-curves">Parametric curves</a></li><li><a href="#uniform-sampling">Uniform sampling</a></li><li><a href="#relation-to-sequences">Relation to sequences</a></li><li><a href="#transforming-samplings">Transforming samplings</a></li><li><a href="#gg-interface">GG interface</a></li><li><a href="#save-the-sampling-data">Save the sampling data</a></li></ul></nav><div class="odoc-content"><div class="odoc-spec"><div class="spec type" id="type-t" class="anchored"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> <span>_ t</span></span></code></div><div class="spec-doc"><p>Representation of a 2D sampling. This can be thought as a path, with possible &quot;jumps&quot; because of discontinuities or leaving the &quot;domain&quot;. The parameter says whether the sampling comes from evaluating a function, so it makes sense to refine it, or is just a sequence of points.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-is_empty" class="anchored"><a href="#val-is_empty" class="anchor"></a><code><span><span class="keyword">val</span> is_empty : <span><span><span class="type-var">_</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>is_empty s</code> returns <code>true</code> iff the sampling <code>s</code> contains no point.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-bounding_box" class="anchored"><a href="#val-bounding_box" class="anchor"></a><code><span><span class="keyword">val</span> bounding_box : <span><span><span class="type-var">_</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Gg</span>.box2</span></code></div><div class="spec-doc"><p><code>bounding_box s</code> returns the smallest rectangle enclosing all the points of the sampling <code>s</code>.</p></div></div><h3 id="parametric-curves"><a href="#parametric-curves" class="anchor"></a>Parametric curves</h3><div class="odoc-spec"><div class="spec value" id="val-fn" class="anchored"><a href="#val-fn" class="anchor"></a><code><span><span class="keyword">val</span> fn : <span>?n:int <span class="arrow">&#45;&gt;</span></span> <span>?viewport:<span class="xref-unresolved">Gg</span>.Box2.t <span class="arrow">&#45;&gt;</span></span> <span>?init:<span>float list</span> <span class="arrow">&#45;&gt;</span></span>
<span>?init_pt:<span><span>(float * float)</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span>float <span class="arrow">&#45;&gt;</span></span> float)</span> <span class="arrow">&#45;&gt;</span></span> <span>float <span class="arrow">&#45;&gt;</span></span> <span>float <span class="arrow">&#45;&gt;</span></span> <span><span>[ `Fn ]</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>fn f a b</code> returns a sampling of the graph of <code>f</code> on the interval [<code>a</code>, <code>b</code>] by evaluating <code>f</code> at <code>n</code> points. For the optional arguments, see <a href="#val-param"><code>param</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-param" class="anchored"><a href="#val-param" class="anchor"></a><code><span><span class="keyword">val</span> param : <span>?n:int <span class="arrow">&#45;&gt;</span></span> <span>?viewport:<span class="xref-unresolved">Gg</span>.Box2.t <span class="arrow">&#45;&gt;</span></span> <span>?init:<span>float list</span> <span class="arrow">&#45;&gt;</span></span>
<span>?init_pt:<span><span>(float * <span>(float * float)</span>)</span> list</span> <span class="arrow">&#45;&gt;</span></span>
<span><span>(<span>float <span class="arrow">&#45;&gt;</span></span> float * float)</span> <span class="arrow">&#45;&gt;</span></span> <span>float <span class="arrow">&#45;&gt;</span></span> <span>float <span class="arrow">&#45;&gt;</span></span> <span><span>[ `Fn ]</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>param f a b</code> returns a sampling of the range of <code>f</code> on the interval [<code>a</code>, <code>b</code>] by evaluating <code>f</code> at <code>n</code> points (or less).</p><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">n</span> <p>The maximum number of evaluations of <code>f</code>. Default: <code>100</code>. If <code>n</code> ≤ 10, then <code>n = 10</code> is used instead.</p></li></ul><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">init</span> <p>Initial values of <code>t</code> such that <code>f t</code> must be included into the sampling in addition to the <code>n</code> evaluations. Only the values between <code>a</code> and <code>b</code> are taken into account. Default: empty.</p></li></ul><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">init_pt</span> <p>Initial points <code>(t, f t)</code> to include into the sampling in addition to the <code>n</code> evaluations. This allows you to use previous evaluations of <code>f</code>. Only the couples with first coordinate <code>t</code> between <code>a</code> and <code>b</code> are considered. Default: empty.</p></li></ul></div></div><h3 id="uniform-sampling"><a href="#uniform-sampling" class="anchor"></a>Uniform sampling</h3><div class="odoc-spec"><div class="spec value" id="val-uniform" class="anchored"><a href="#val-uniform" class="anchor"></a><code><span><span class="keyword">val</span> uniform : <span>?n:int <span class="arrow">&#45;&gt;</span></span> <span><span>(<span>float <span class="arrow">&#45;&gt;</span></span> float)</span> <span class="arrow">&#45;&gt;</span></span> <span>float <span class="arrow">&#45;&gt;</span></span> <span>float <span class="arrow">&#45;&gt;</span></span> <span><span>[ `Fn ]</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>uniform f a b</code> returns a sampling of the graph of <code>f</code> on <code>n</code> equidistant points in the interval [<code>a</code>, <code>b</code>] (the boundaries <code>a</code> and <code>b</code> being always included — so <code>n &gt;= 2</code>). The resulting sampling may have less than <code>n</code> points because evaluations returning points with NaN components are discarded (they split the path).</p><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">n</span> <p>the number of points. If <code>n &lt;= 2</code> is given, it is considered as if <code>n=2</code> was passed. Default: <code>n = 100</code>.</p></li></ul></div></div><h3 id="relation-to-sequences"><a href="#relation-to-sequences" class="anchor"></a>Relation to sequences</h3><div class="odoc-spec"><div class="spec value" id="val-of_path" class="anchored"><a href="#val-of_path" class="anchor"></a><code><span><span class="keyword">val</span> of_path : <span><span><span>(float * float)</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span>[ `Pt ]</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>Use the provided path as the sampling.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-to_list" class="anchored"><a href="#val-to_list" class="anchor"></a><code><span><span class="keyword">val</span> to_list : <span><span><span class="type-var">_</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(float * float)</span> list</span> list</span></span></code></div><div class="spec-doc"><p><code>to_list t</code> return the sampling as a list of connected components of the path, each of which is given as a list of (x,y) couples.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-of_seq" class="anchored"><a href="#val-of_seq" class="anchor"></a><code><span><span class="keyword">val</span> of_seq : <span>?n:int <span class="arrow">&#45;&gt;</span></span> <span><span><span>(float * float)</span> <span class="xref-unresolved">Stdlib</span>.Seq.t</span> <span class="arrow">&#45;&gt;</span></span> <span><span>[ `Pt ]</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>of_seq seq</code> convert the sequence of points <code>seq</code> to a sampling.</p><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">n</span> <p>only takes at most the first <code>n</code> entries. If <code>n</code> is not set (the default), this function may run into an infinite loop.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-to_seq" class="anchored"><a href="#val-to_seq" class="anchor"></a><code><span><span class="keyword">val</span> to_seq : <span><span><span class="type-var">_</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(float * float)</span> <span class="xref-unresolved">Stdlib</span>.Seq.t</span> <span class="xref-unresolved">Stdlib</span>.Seq.t</span></span></code></div><div class="spec-doc"><p><code>to_seq t</code> convert <code>t</code> to a sequence of connected compononent.</p></div></div><h3 id="transforming-samplings"><a href="#transforming-samplings" class="anchor"></a>Transforming samplings</h3><div class="odoc-spec"><div class="spec value" id="val-tr" class="anchored"><a href="#val-tr" class="anchor"></a><code><span><span class="keyword">val</span> tr : <span><span class="xref-unresolved">Gg</span>.m3 <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">_</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>[ `Pt ]</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>tr m t</code> apply the transform <code>m</code> on <code>t</code>. See <code>Gg</code>.P2.tr for more details.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-clip" class="anchored"><a href="#val-clip" class="anchor"></a><code><span><span class="keyword">val</span> clip : <span><span><span class="type-var">_</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">Gg</span>.box2 <span class="arrow">&#45;&gt;</span></span> <span><span>[ `Pt ]</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>clip t b</code> returns the sampling <code>t</code> but clipped to the 2D box. A path that crosses the boundary will get additional nodes at the points of crossing and the part outside the bounding box will be dropped. (Thus a path entirely out of the bounding box will be removed.)</p></div></div><h3 id="gg-interface"><a href="#gg-interface" class="anchor"></a>GG interface</h3><div class="odoc-spec"><div class="spec module" id="module-P2" class="anchored"><a href="#module-P2" class="anchor"></a><code><span><span class="keyword">module</span> </span><span><a href="P2/index.html">P2</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Interface using <code>Gg.p2</code> to represent points.</p></div></div><h3 id="save-the-sampling-data"><a href="#save-the-sampling-data" class="anchor"></a>Save the sampling data</h3><div class="odoc-spec"><div class="spec value" id="val-to_channel" class="anchored"><a href="#val-to_channel" class="anchor"></a><code><span><span class="keyword">val</span> to_channel : <span><span><span class="type-var">_</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">Stdlib</span>.out_channel <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>to_channel t ch</code> writes the sampling <code>t</code> to the channel <code>ch</code>. Each point is written as &quot;x y&quot; on a single line (in scientific notation). If the path is interrupted, a blank line is printed. This format is compatible with gnuplot.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-to_file" class="anchored"><a href="#val-to_file" class="anchor"></a><code><span><span class="keyword">val</span> to_file : <span><span><span class="type-var">_</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>to_file t fname</code> saves the sampling <code>t</code> to the file <code>fname</code> using the format described in <a href="#val-to_channel"><code>to_channel</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-to_latex" class="anchored"><a href="#val-to_latex" class="anchor"></a><code><span><span class="keyword">val</span> to_latex : <span><span><span class="type-var">_</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span>?n:int <span class="arrow">&#45;&gt;</span></span> <span>?arrow:string <span class="arrow">&#45;&gt;</span></span> <span>?arrow_pos:float <span class="arrow">&#45;&gt;</span></span> <span>?color:<span class="xref-unresolved">Gg</span>.color <span class="arrow">&#45;&gt;</span></span>
<span>string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>to_latex t fname</code> saves the sampling <code>t</code> as PGF/TikZ commands.</p><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">n</span> <p>the maximum number of points of PGF path (after which the sampling curve is drawn as several PGF paths). Default: <code>20_000</code>.</p></li></ul><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">arrow</span> <p>The type of arrow to draw. See the TikZ manual. If <code>arrow_pos</code> is specified and not this, it defaults to &quot;&gt;&quot;.</p></li></ul><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">arrow_pos</span> <p>the position of the arrow as a percent of the curve length (in the interval [0.,1.]). If <code>arrow</code> is specified but not this, it defaults to <code>0.5</code>.</p></li></ul><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">color</span> <p>specify the color of the curve.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-to_latex_channel" class="anchored"><a href="#val-to_latex_channel" class="anchor"></a><code><span><span class="keyword">val</span> to_latex_channel : <span><span><span class="type-var">_</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span>?n:int <span class="arrow">&#45;&gt;</span></span> <span>?arrow:string <span class="arrow">&#45;&gt;</span></span> <span>?arrow_pos:float <span class="arrow">&#45;&gt;</span></span>
<span>?color:<span class="xref-unresolved">Gg</span>.color <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">Stdlib</span>.out_channel <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>to_latex_channel t ch</code> writes the sampling <code>t</code> as PGF/TikZ commands to the channel <code>ch</code>. See <a href="#val-to_latex"><code>to_latex</code></a> for the meaning of optional arguments.</p></div></div></div></body></html>