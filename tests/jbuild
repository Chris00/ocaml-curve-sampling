(jbuild_version 1)

(executables
 ((names        (clip nice osc abs dom))
  (libraries    (curve_sampling))))

(rule
 ((targets (clip_gp.pdf clip.pdf))
  (deps (clip.exe clip.gp clip.tex))
  (action (progn
           (run ${<})
           (run gnuplot clip.gp)
           (run pdflatex -interaction=batchmode clip.tex)))))

(rule
 ((targets (nice.pdf))
  (deps    (nice.exe nice.gp))
  (action  (progn
            (run ${<})
            (run gnuplot nice.gp)))))


(rule
 ((targets (osc.pdf))
  (deps    (osc.exe osc.gp))
  (action  (progn
            (run ${<})
            (run gnuplot osc.gp)))))

(rule
 ((targets (abs.pdf))
  (deps    (abs.exe abs.gp))
  (action  (progn
            (run ${<})
            (run gnuplot abs.gp)))))

(rule
 ((targets (dom.pdf))
  (deps    (dom.exe dom.gp))
  (action  (progn
            (run ${<})
            (run gnuplot dom.gp)))))

(alias
 ((name runtest)
  (deps (clip_gp.pdf clip.pdf
         nice.pdf osc.pdf abs.pdf dom.pdf))))
